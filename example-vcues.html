<!DOCTYPE html>

<html lang="en" class="light sans-serif">
  <head>
    <meta charset="utf-8" />

    <title>Peek42 - visual cues, dark theme and quiet mode</title>

    <link rel="stylesheet" href="https://unpkg.com/peek42@latest/dist/peek42.css" />
    <link rel="stylesheet" id="peek42DarkCss" />

    <script src="https://unpkg.com/apivis@latest/dist/apivis.browser.js"></script>
    <script src="https://unpkg.com/peek42@latest/dist/peek42.browser.js"></script>
      <script>peek42.use(apivis);</script>

    <style>
.light {
  background: #f5f5f5;
  color: black;
}

.dark {
  background: black;
  color: #bdb76b;
}

.dark a {
  color: #65b042;
}

.sans-serif {
  font-family: Avenir, sans-serif;
}
    </style>

    <script>(() => { 'use strict';
const {p, pp} = peek42;

function rejectedPromise() {
  return new Promise((resolve, reject) => {
    setTimeout(() => reject(new Error('BANG')), 1000);
  });
}

document.addEventListener('DOMContentLoaded', () => {
  let peek42DarkCss = document.getElementById('peek42DarkCss');
  let peek42DarkCssUrl = 'https://unpkg.com/peek42@latest/dist/peek42-dark.css';
  let rand = document.getElementById('rand');
  let warn = document.getElementById('warn');
  let boom = document.getElementById('boom');
  let bang = document.getElementById('bang');

  switchTheme.addEventListener('click', () => {
    let html = document.documentElement;
    let pageClasses = html.classList;

    if (pageClasses.contains('light')) {
      pageClasses.remove('light');
      pageClasses.add('dark');
      peek42DarkCss.setAttribute('href', peek42DarkCssUrl);
      switchTheme.textContent = 'Light Theme';
    } else {
      pageClasses.remove('dark');
      pageClasses.add('light');
      peek42DarkCss.removeAttribute('href');
      switchTheme.textContent = 'Dark Theme';
    }
  });

  rand.addEventListener('click', () => {
    p(Math.random());
  });

  warn.addEventListener('click', () => {
    p('Warning!', '', {level: 'warn'});
  });

  boom.addEventListener('click', () => {
    BOOM
  });

  bang.addEventListener('click', async () => {
    await rejectedPromise();
  });
});
    })();</script>
  </head>

  <body>
<h1 id="about">Peek42 - visual cues, dark theme and quiet mode [<a href="./index.html">Index</a>]</h1>

<button id="switchTheme">Dark Theme</button>
<button id="rand">Rand</button>
<button id="warn">Warn</button>
<button id="boom">Boom (unhandled exception)</button>
<button id="bang">Bang (unhandled promise rejection)</button>

<p>Tap the buttons and console Clear and observe the visual cues. Tap the Dark/Light Theme button to switch between themes. Tap the <em>Quiet</em> checkbox (only visible when the console is minimized) and observe the difference when log write occurs
</p>
  </body>
</html>
